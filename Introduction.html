<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Sample Spam detection
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Library for the FSharp friendly usage of the ML.NET project. For documentation visit: <https://csbiology.github.io/FSharpML/>" />
    <meta name="author" content="Timo Mï¿½hlhaus, Kevin Schneider, Heinrich Lukas Weil, David Zimmer, F# open source contributors" />

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet" />
    <meta http-equiv="X-UA-Compatible" content="IE=11">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://CSBiology.github.io/FSharpML//content/style.css" /> <!--https://CSBiology.github.io/FSharpML/-->
    <link type="text/css" rel="stylesheet" href="https://CSBiology.github.io/FSharpML//style/CSBstyle.css" /> <!--https://CSBiology.github.io/FSharpML/-->
    <script type="text/javascript" src="https://CSBiology.github.io/FSharpML//content/tips.js"></script> <!--https://CSBiology.github.io/FSharpML/-->
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>
    <div class="container">
        <div class="masthead">
            <ul class="nav nav-pills pull-right">
                <li><a href="http://fsharp.org">fsharp.org</a></li>
                <li><a href="https://github.com/CSBiology/FSharpML">github page</a></li>
            </ul>
            <h3 class="muted"><a href="https://CSBiology.github.io/FSharpML//index.html">BioFSharp</a></h3>
        </div>
        <hr />
        <div class="row">
            <div class="span9" id="main">
                <h1><a name="Sample-Spam-detection" class="anchor" href="#Sample-Spam-detection">Sample Spam detection</a></h1>
<p>*</p>
<h1><a name="Introduction" class="anchor" href="#Introduction">Introduction</a></h1>
<p>FSharpML is a functional-friendly lightweight wrapper of the powerful <a href="https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet">ML.Net</a> library. It is designed to enable users to explore ML.Net in a scriptable manner, while maintaining the functional style of F#.</p>
<p>After installing the package via Nuget we can load the delivered reference script and start using ML.Net in conjunction with FSharpML.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#load</span> <span class="s">&quot;FSharpML.fsx&quot;</span>



<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="id">ML</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">ML</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="id">FSharpML</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="id">FSharpML</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="id">EstimatorModel</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs7', 12)" onmouseover="showTip(event, 'fs7', 12)" class="id">FSharpML</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 13)" onmouseover="showTip(event, 'fs9', 13)" class="id">TransformerModel</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 14)" onmouseover="showTip(event, 'fs4', 14)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 15)" onmouseover="showTip(event, 'fs5', 15)" class="id">ML</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="id">Data</span>
</code></pre></td>
</tr>
</table>
<p>To get a feel how this library handles ML.Net operations we rebuild the <a href="https://github.com/dotnet/machinelearning-samples/tree/master/samples/fsharp/getting-started/BinaryClassification_SpamDetection">Spam Detection tutorial</a> given by ML.Net.
We will start by instantiating a MLContext, the heart of the ML.Net API and intended to serve as a method catalog. We will now use it to set a scope on data stored in a text file. The method name might be misleading, but ML.Net readers are lazy and
the reading process will start when the data is processed <a href="https://github.com/dotnet/machinelearning/blob/master/docs/code/IDataViewTypeSystem.md#standard-column-types">(see).</a></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 17)" onmouseover="showTip(event, 'fs10', 17)" class="id">mlContext</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 18)" onmouseover="showTip(event, 'fs11', 18)" class="rt">MLContext</span><span class="pn">(</span><span class="id">seed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="vt">Nullable</span> <span class="n">1</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="id">trainDataPath</span>  <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span>  <span class="o">+</span> <span class="s">&quot;./data/SMSSpamCollection.txt&quot;</span><span class="pn">)</span>
    
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 21)" onmouseover="showTip(event, 'fs14', 21)" class="id">data</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs10', 22)" onmouseover="showTip(event, 'fs10', 22)" class="fn">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 24)" onmouseover="showTip(event, 'fs16', 24)" class="id">LoadFromTextFile</span><span class="pn">(</span> 
            <span class="id">path</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 25)" onmouseover="showTip(event, 'fs13', 25)" class="id">trainDataPath</span><span class="pn">,</span>
            <span class="id">columns</span> <span class="o">=</span> 
                <span class="pn">[|</span>
                    <span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="rt">TextLoader</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 27)" onmouseover="showTip(event, 'fs18', 27)" class="id">Column</span><span class="pn">(</span><span class="s">&quot;LabelText&quot;</span> <span class="pn">,</span> <span onmouseout="hideTip(event, 'fs19', 28)" onmouseover="showTip(event, 'fs19', 28)" class="vt">DataKind</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 29)" onmouseover="showTip(event, 'fs20', 29)" class="id">String</span><span class="pn">,</span> <span class="n">0</span><span class="pn">)</span>
                    <span onmouseout="hideTip(event, 'fs17', 30)" onmouseover="showTip(event, 'fs17', 30)" class="rt">TextLoader</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="id">Column</span><span class="pn">(</span><span class="s">&quot;Message&quot;</span> <span class="pn">,</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="vt">DataKind</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="id">String</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span>
                <span class="pn">|]</span><span class="pn">,</span>
            <span class="id">hasHeader</span> <span class="o">=</span> <span class="k">false</span><span class="pn">,</span>
            <span class="id">separatorChar</span> <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>Now that we told our interactive environment about the data we can start thinking about a model (EstimatorChain in the ML.Net jargon)
we want to build. As the MLContext serves as a catalog we will use it to draw transformations that can be appended to form a estimator chain.
At this point we will see FSharpML comming into play enabling us to use the beloved pipelining style familiar to FSharp users.
We will now create an EstimatorChain which converts the text label to a bool then featurizes the text, and add a linear trainer.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 34)" onmouseover="showTip(event, 'fs21', 34)" class="id">estimatorChain</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs22', 35)" onmouseover="showTip(event, 'fs22', 35)" class="rt">EstimatorChain</span><span class="pn">(</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 36)" onmouseover="showTip(event, 'fs23', 36)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 37)" onmouseover="showTip(event, 'fs24', 37)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 38)" onmouseover="showTip(event, 'fs10', 38)" class="fn">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 39)" onmouseover="showTip(event, 'fs25', 39)" class="id">Transforms</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 40)" onmouseover="showTip(event, 'fs26', 40)" class="id">Conversion</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 41)" onmouseover="showTip(event, 'fs27', 41)" class="id">MapValue</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 42)" onmouseover="showTip(event, 'fs28', 42)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 43)" onmouseover="showTip(event, 'fs29', 43)" class="id">Label</span><span class="pn">,</span> <span class="id">dict</span> <span class="pn">[</span><span class="s">&quot;ham&quot;</span><span class="pn">,</span> <span class="k">false</span><span class="pn">;</span> <span class="s">&quot;spam&quot;</span><span class="pn">,</span> <span class="k">true</span><span class="pn">]</span><span class="pn">,</span> <span class="s">&quot;LabelText&quot;</span><span class="pn">)</span> <span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 44)" onmouseover="showTip(event, 'fs23', 44)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 45)" onmouseover="showTip(event, 'fs24', 45)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 46)" onmouseover="showTip(event, 'fs10', 46)" class="fn">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 47)" onmouseover="showTip(event, 'fs25', 47)" class="id">Transforms</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 48)" onmouseover="showTip(event, 'fs30', 48)" class="id">Text</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 49)" onmouseover="showTip(event, 'fs31', 49)" class="id">FeaturizeText</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 50)" onmouseover="showTip(event, 'fs28', 50)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 51)" onmouseover="showTip(event, 'fs32', 51)" class="id">Features</span><span class="pn">,</span> <span class="s">&quot;Message&quot;</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 52)" onmouseover="showTip(event, 'fs23', 52)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 53)" onmouseover="showTip(event, 'fs33', 53)" class="id">appendCacheCheckpoint</span> <span onmouseout="hideTip(event, 'fs10', 54)" onmouseover="showTip(event, 'fs10', 54)" class="id">mlContext</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 55)" onmouseover="showTip(event, 'fs23', 55)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 56)" onmouseover="showTip(event, 'fs24', 56)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 57)" onmouseover="showTip(event, 'fs10', 57)" class="fn">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 58)" onmouseover="showTip(event, 'fs34', 58)" class="id">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 59)" onmouseover="showTip(event, 'fs35', 59)" class="id">Trainers</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs36', 60)" onmouseover="showTip(event, 'fs36', 60)" class="id">SdcaLogisticRegression</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 61)" onmouseover="showTip(event, 'fs28', 61)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 62)" onmouseover="showTip(event, 'fs29', 62)" class="id">Label</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 63)" onmouseover="showTip(event, 'fs28', 63)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 64)" onmouseover="showTip(event, 'fs32', 64)" class="id">Features</span><span class="pn">)</span><span class="pn">)</span>
    
</code></pre></td>
</tr>
</table>
<p>This is already pretty fsharp-friendly but we thought we could even closer by releaving us from carring around our instance of the MLContext
explicitly. For this we created the type EstimatorModel which contains our EstimatorChain and the context. By Calling append by we only have to provide a
lambda expression were we can define which method we want of our context.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 65)" onmouseover="showTip(event, 'fs37', 65)" class="id">estimatorModel</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs38', 66)" onmouseover="showTip(event, 'fs38', 66)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 67)" onmouseover="showTip(event, 'fs39', 67)" class="id">create</span> <span onmouseout="hideTip(event, 'fs10', 68)" onmouseover="showTip(event, 'fs10', 68)" class="id">mlContext</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 69)" onmouseover="showTip(event, 'fs38', 69)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 70)" onmouseover="showTip(event, 'fs40', 70)" class="id">appendBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs41', 71)" onmouseover="showTip(event, 'fs41', 71)" class="id">mlc</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 72)" onmouseover="showTip(event, 'fs41', 72)" class="fn">mlc</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 73)" onmouseover="showTip(event, 'fs25', 73)" class="id">Transforms</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 74)" onmouseover="showTip(event, 'fs26', 74)" class="id">Conversion</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 75)" onmouseover="showTip(event, 'fs27', 75)" class="id">MapValue</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 76)" onmouseover="showTip(event, 'fs28', 76)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 77)" onmouseover="showTip(event, 'fs29', 77)" class="id">Label</span><span class="pn">,</span> <span class="id">dict</span> <span class="pn">[</span><span class="s">&quot;ham&quot;</span><span class="pn">,</span> <span class="k">false</span><span class="pn">;</span> <span class="s">&quot;spam&quot;</span><span class="pn">,</span> <span class="k">true</span><span class="pn">]</span><span class="pn">,</span> <span class="s">&quot;LabelText&quot;</span><span class="pn">)</span> <span class="pn">)</span>
    <span class="c">// or use transformBy</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 78)" onmouseover="showTip(event, 'fs38', 78)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 79)" onmouseover="showTip(event, 'fs42', 79)" class="id">transformBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs43', 80)" onmouseover="showTip(event, 'fs43', 80)" class="id">tfc</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs43', 81)" onmouseover="showTip(event, 'fs43', 81)" class="fn">tfc</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 82)" onmouseover="showTip(event, 'fs30', 82)" class="id">Text</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 83)" onmouseover="showTip(event, 'fs31', 83)" class="id">FeaturizeText</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 84)" onmouseover="showTip(event, 'fs28', 84)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 85)" onmouseover="showTip(event, 'fs32', 85)" class="id">Features</span><span class="pn">,</span> <span class="s">&quot;Message&quot;</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 86)" onmouseover="showTip(event, 'fs38', 86)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 87)" onmouseover="showTip(event, 'fs44', 87)" class="id">appendCacheCheckpoint</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 88)" onmouseover="showTip(event, 'fs38', 88)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 89)" onmouseover="showTip(event, 'fs40', 89)" class="id">appendBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs41', 90)" onmouseover="showTip(event, 'fs41', 90)" class="id">mlc</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 91)" onmouseover="showTip(event, 'fs41', 91)" class="fn">mlc</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 92)" onmouseover="showTip(event, 'fs34', 92)" class="id">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 93)" onmouseover="showTip(event, 'fs35', 93)" class="id">Trainers</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs36', 94)" onmouseover="showTip(event, 'fs36', 94)" class="id">SdcaLogisticRegression</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 95)" onmouseover="showTip(event, 'fs28', 95)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 96)" onmouseover="showTip(event, 'fs29', 96)" class="id">Label</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 97)" onmouseover="showTip(event, 'fs28', 97)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 98)" onmouseover="showTip(event, 'fs32', 98)" class="id">Features</span><span class="pn">)</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>Way better. Now we can concentrate on machine learning. So lets start by fitting our EstimatorModel to the complete data set.
The return value of this process is a so called TransformerModel, which contains a trained EstimatorChain
and can be used to transform unseen data. For this we want to split the data we previously put in scope into
two fractions. One to train the model and a remainder to evaluate the model.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 99)" onmouseover="showTip(event, 'fs45', 99)" class="id">trainData</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs46', 100)" onmouseover="showTip(event, 'fs46', 100)" class="id">testData</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs14', 101)" onmouseover="showTip(event, 'fs14', 101)" class="id">data</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 102)" onmouseover="showTip(event, 'fs47', 102)" class="m">DataModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 103)" onmouseover="showTip(event, 'fs48', 103)" class="id">ofDataview</span> <span onmouseout="hideTip(event, 'fs10', 104)" onmouseover="showTip(event, 'fs10', 104)" class="id">mlContext</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 105)" onmouseover="showTip(event, 'fs47', 105)" class="m">DataModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 106)" onmouseover="showTip(event, 'fs49', 106)" class="id">trainTestSplit</span> <span class="n">0.1</span>  <span class="c">//initTrainTestSplit(estimatorModel.Context,Testfraction=0.1) </span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 107)" onmouseover="showTip(event, 'fs50', 107)" class="id">trainedModel</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs37', 108)" onmouseover="showTip(event, 'fs37', 108)" class="id">estimatorModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 109)" onmouseover="showTip(event, 'fs38', 109)" class="m">EstimatorModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 110)" onmouseover="showTip(event, 'fs51', 110)" class="id">fit</span> <span onmouseout="hideTip(event, 'fs45', 111)" onmouseover="showTip(event, 'fs45', 111)" class="id">trainData</span><span class="pn">.</span><span class="id">Dataview</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 112)" onmouseover="showTip(event, 'fs52', 112)" class="id">evaluationMetrics</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs50', 113)" onmouseover="showTip(event, 'fs50', 113)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 114)" onmouseover="showTip(event, 'fs53', 114)" class="m">Evaluation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 115)" onmouseover="showTip(event, 'fs54', 115)" class="m">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 116)" onmouseover="showTip(event, 'fs55', 116)" class="id">evaluate</span> <span onmouseout="hideTip(event, 'fs46', 117)" onmouseover="showTip(event, 'fs46', 117)" class="id">testData</span><span class="pn">.</span><span class="id">Dataview</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 118)" onmouseover="showTip(event, 'fs56', 118)" class="id">scoredData</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs50', 119)" onmouseover="showTip(event, 'fs50', 119)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs57', 120)" onmouseover="showTip(event, 'fs57', 120)" class="m">TransformerModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs58', 121)" onmouseover="showTip(event, 'fs58', 121)" class="id">transform</span> <span onmouseout="hideTip(event, 'fs14', 122)" onmouseover="showTip(event, 'fs14', 122)" class="id">data</span> 

<span onmouseout="hideTip(event, 'fs52', 123)" onmouseover="showTip(event, 'fs52', 123)" class="id">evaluationMetrics</span><span class="pn">.</span><span class="id">Accuracy</span>
</code></pre></td>
</tr>
</table>
<p>Now that we can examine the metrics of our model evaluation, see that we have a accuracy of 0.99
and be tempted to use it in production so lets test it first with some examples.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs59', 124)" onmouseover="showTip(event, 'fs59', 124)" class="rt">SpamInput</span> <span class="o">=</span> 
    <span class="pn">{</span>
        <span onmouseout="hideTip(event, 'fs60', 125)" onmouseover="showTip(event, 'fs60', 125)" class="id">LabelText</span> <span class="pn">:</span> <span class="id">string</span>
        <span onmouseout="hideTip(event, 'fs61', 126)" onmouseover="showTip(event, 'fs61', 126)" class="id">Message</span> <span class="pn">:</span> <span class="id">string</span>
    <span class="pn">}</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 127)" onmouseover="showTip(event, 'fs62', 127)" class="id">exampleData</span> <span class="o">=</span> 
    <span class="pn">[</span>
        <span class="s">&quot;That&#39;s a great idea. It should work.&quot;</span>
        <span class="s">&quot;free medicine winner! congratulations&quot;</span>
        <span class="s">&quot;Yes we should meet over the weekend!&quot;</span>
        <span class="s">&quot;you win pills and free entry vouchers&quot;</span>
    <span class="pn">]</span> 
    <span class="o">|&gt;</span> <span class="id">List</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">message</span> <span class="k">-&gt;</span><span class="pn">{</span><span class="id">LabelText</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="pn">;</span> <span class="id">Message</span> <span class="o">=</span> <span class="id">message</span><span class="pn">}</span><span class="pn">)</span>

<span class="c">//exampleData </span>
<span class="c">//|&gt; (Prediction.BinaryClassification.predictDefaultCols trainedModel)</span>
<span class="c">//|&gt; Array.ofSeq</span>
</code></pre></td>
</tr>
</table>
<p>As we see, even so our accuracy when evaluating the model on the test data set was very high, it does not set the correct lable true, to the
second and the fourth message which look a lot like spam. Lets examine our training data set:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs63', 128)" onmouseover="showTip(event, 'fs63', 128)" class="id">labels</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs64', 129)" onmouseover="showTip(event, 'fs64', 129)" class="id">counts</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs56', 130)" onmouseover="showTip(event, 'fs56', 130)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 131)" onmouseover="showTip(event, 'fs28', 131)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 132)" onmouseover="showTip(event, 'fs29', 132)" class="id">Label</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 133)" onmouseover="showTip(event, 'fs65', 133)" class="m">Seq</span><span class="pn">.</span><span class="id">countBy</span> <span class="id">id</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 134)" onmouseover="showTip(event, 'fs65', 134)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs66', 135)" onmouseover="showTip(event, 'fs66', 135)" class="id">unzip</span>
    
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 136)" onmouseover="showTip(event, 'fs67', 136)" class="id">LabelDist</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs68', 137)" onmouseover="showTip(event, 'fs68', 137)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs69', 138)" onmouseover="showTip(event, 'fs69', 138)" class="id">Doughnut</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs64', 139)" onmouseover="showTip(event, 'fs64', 139)" class="id">counts</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs63', 140)" onmouseover="showTip(event, 'fs63', 140)" class="id">labels</span><span class="pn">)</span>
    
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs70', 141)" onmouseover="showTip(event, 'fs70', 141)" class="id">probabilityHist</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs71', 142)" onmouseover="showTip(event, 'fs71', 142)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 143)" onmouseover="showTip(event, 'fs28', 143)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 144)" onmouseover="showTip(event, 'fs29', 144)" class="id">Label</span><span class="pn">)</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 145)" onmouseover="showTip(event, 'fs65', 145)" class="m">Seq</span><span class="pn">.</span><span class="id">zip</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs71', 146)" onmouseover="showTip(event, 'fs71', 146)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 147)" onmouseover="showTip(event, 'fs28', 147)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs72', 148)" onmouseover="showTip(event, 'fs72', 148)" class="id">Probability</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 149)" onmouseover="showTip(event, 'fs65', 149)" class="m">Seq</span><span class="pn">.</span><span class="id">groupBy</span> <span class="id">snd</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 150)" onmouseover="showTip(event, 'fs65', 150)" class="m">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="id">label</span><span class="pn">,</span><span class="id">x</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span class="id">x</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 151)" onmouseover="showTip(event, 'fs65', 151)" class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="id">fst</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 152)" onmouseover="showTip(event, 'fs68', 152)" class="id">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 153)" onmouseover="showTip(event, 'fs73', 153)" class="id">Histogram</span>
                <span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 154)" onmouseover="showTip(event, 'fs68', 154)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 155)" onmouseover="showTip(event, 'fs74', 155)" class="id">Combine</span>


<span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 156)" onmouseover="showTip(event, 'fs75', 156)" class="id">ScoreHist</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs71', 157)" onmouseover="showTip(event, 'fs71', 157)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 158)" onmouseover="showTip(event, 'fs28', 158)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 159)" onmouseover="showTip(event, 'fs29', 159)" class="id">Label</span><span class="pn">)</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 160)" onmouseover="showTip(event, 'fs65', 160)" class="m">Seq</span><span class="pn">.</span><span class="id">zip</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs71', 161)" onmouseover="showTip(event, 'fs71', 161)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 162)" onmouseover="showTip(event, 'fs28', 162)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs76', 163)" onmouseover="showTip(event, 'fs76', 163)" class="id">Score</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 164)" onmouseover="showTip(event, 'fs65', 164)" class="m">Seq</span><span class="pn">.</span><span class="id">groupBy</span> <span class="id">snd</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 165)" onmouseover="showTip(event, 'fs65', 165)" class="m">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="id">label</span><span class="pn">,</span><span class="id">x</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span class="id">x</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 166)" onmouseover="showTip(event, 'fs65', 166)" class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="id">fst</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 167)" onmouseover="showTip(event, 'fs68', 167)" class="id">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 168)" onmouseover="showTip(event, 'fs73', 168)" class="id">Histogram</span>
                <span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 169)" onmouseover="showTip(event, 'fs68', 169)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 170)" onmouseover="showTip(event, 'fs74', 170)" class="id">Combine</span>


<span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 171)" onmouseover="showTip(event, 'fs77', 171)" class="id">stackedChart</span> <span class="o">=</span> 
    <span class="pn">[</span><span onmouseout="hideTip(event, 'fs70', 172)" onmouseover="showTip(event, 'fs70', 172)" class="id">probabilityHist</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs75', 173)" onmouseover="showTip(event, 'fs75', 173)" class="id">ScoreHist</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 174)" onmouseover="showTip(event, 'fs68', 174)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs78', 175)" onmouseover="showTip(event, 'fs78', 175)" class="id">Stack</span><span class="pn">(</span><span class="n">2</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 176)" onmouseover="showTip(event, 'fs68', 176)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs79', 177)" onmouseover="showTip(event, 'fs79', 177)" class="id">withSize</span><span class="pn">(</span><span class="n">900.</span><span class="pn">,</span><span class="n">600.</span><span class="pn">)</span>
    
</code></pre></td>
</tr>
</table>
<p>The chart clearly shows that the data we learned uppon is highly inhomogenous. We have a lot more ham than spam, which is generally preferable but
but our models labeling threshold is clearly to high. Lets have a look at the precision recall curves of our model. For this we will evaluate the model
with different thresholds and plot both</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
<span class="l">55: </span>
<span class="l">56: </span>
<span class="l">57: </span>
<span class="l">58: </span>
<span class="l">59: </span>
<span class="l">60: </span>
<span class="l">61: </span>
<span class="l">62: </span>
<span class="l">63: </span>
<span class="l">64: </span>
<span class="l">65: </span>
<span class="l">66: </span>
<span class="l">67: </span>
<span class="l">68: </span>
<span class="l">69: </span>
<span class="l">70: </span>
<span class="l">71: </span>
<span class="l">72: </span>
<span class="l">73: </span>
<span class="l">74: </span>
<span class="l">75: </span>
<span class="l">76: </span>
<span class="l">77: </span>
<span class="l">78: </span>
<span class="l">79: </span>
<span class="l">80: </span>
<span class="l">81: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 178)" onmouseover="showTip(event, 'fs80', 178)" class="id">idea</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs50', 179)" onmouseover="showTip(event, 'fs50', 179)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs57', 180)" onmouseover="showTip(event, 'fs57', 180)" class="m">TransformerModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs58', 181)" onmouseover="showTip(event, 'fs58', 181)" class="id">transform</span> <span onmouseout="hideTip(event, 'fs14', 182)" onmouseover="showTip(event, 'fs14', 182)" class="id">data</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 183)" onmouseover="showTip(event, 'fs81', 183)" class="id">thresholdVSPrecicionAndRecall</span> <span class="o">=</span> 
    <span class="pn">[</span><span class="o">-</span><span class="n">0.05</span> <span class="o">..</span> <span class="n">0.05</span> <span class="o">..</span> <span class="n">0.95</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="id">List</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">threshold</span> <span class="k">-&gt;</span>
                    <span class="k">let</span> <span class="id">newModel</span> <span class="o">=</span> 
                        <span class="k">let</span> <span class="id">lastTransformer</span> <span class="o">=</span> 
                            <span onmouseout="hideTip(event, 'fs82', 184)" onmouseover="showTip(event, 'fs82', 184)" class="id">BinaryPredictionTransformer</span><span class="pn">&lt;</span><span class="id">IPredictorProducing</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">&gt;</span><span class="pn">(</span>
                                <span onmouseout="hideTip(event, 'fs50', 185)" onmouseover="showTip(event, 'fs50', 185)" class="id">trainedModel</span><span class="pn">.</span><span class="id">Context</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs83', 186)" onmouseover="showTip(event, 'fs83', 186)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">LastTransformer</span><span class="pn">.</span><span class="id">Model</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs83', 187)" onmouseover="showTip(event, 'fs83', 187)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">GetOutputSchema</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs80', 188)" onmouseover="showTip(event, 'fs80', 188)" class="id">idea</span><span class="pn">.</span><span class="id">Schema</span><span class="pn">)</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs83', 189)" onmouseover="showTip(event, 'fs83', 189)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">LastTransformer</span><span class="pn">.</span><span class="id">FeatureColumn</span><span class="pn">,</span> 
                                <span class="id">threshold</span> <span class="o">=</span> <span class="id">float32</span> <span class="id">threshold</span><span class="pn">,</span> 
                                <span class="id">thresholdColumn</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 190)" onmouseover="showTip(event, 'fs28', 190)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs72', 191)" onmouseover="showTip(event, 'fs72', 191)" class="id">Probability</span><span class="pn">)</span>
                        <span class="k">let</span> <span class="id">parts</span> <span class="o">=</span> 
                            <span onmouseout="hideTip(event, 'fs83', 192)" onmouseover="showTip(event, 'fs83', 192)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span> 
                            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 193)" onmouseover="showTip(event, 'fs65', 193)" class="id">Seq</span><span class="pn">.</span><span class="id">toArray</span>
                            <span class="o">|&gt;</span> <span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span><span class="id">x</span><span class="pn">.</span><span class="pn">[</span><span class="o">..</span><span class="id">x</span><span class="pn">.</span><span class="id">Length</span><span class="o">-</span><span class="n">2</span><span class="pn">]</span> 
                        
                        <span class="id">printfn</span> <span class="s">&quot;%A, %A&quot;</span> <span class="id">lastTransformer</span><span class="pn">.</span><span class="id">Threshold</span> <span class="id">lastTransformer</span><span class="pn">.</span><span class="id">ThresholdColumn</span>
                        <span onmouseout="hideTip(event, 'fs84', 194)" onmouseover="showTip(event, 'fs84', 194)" class="id">TransformerChain</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs85', 195)" onmouseover="showTip(event, 'fs85', 195)" class="id">ITransformer</span><span class="pn">&gt;</span><span class="pn">(</span><span class="id">parts</span><span class="pn">)</span><span class="pn">.</span><span class="id">Append</span><span class="pn">(</span><span class="id">lastTransformer</span><span class="pn">)</span>
                    <span class="k">let</span> <span class="id">newModel&#39;</span> <span class="o">=</span> 
                        <span class="pn">{</span><span onmouseout="hideTip(event, 'fs57', 196)" onmouseover="showTip(event, 'fs57', 196)" class="id">TransformerModel</span><span class="pn">.</span><span class="id">TransformerChain</span> <span class="o">=</span> <span class="id">newModel</span><span class="pn">;</span><span class="id">Context</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs83', 197)" onmouseover="showTip(event, 'fs83', 197)" class="id">trainedModel</span><span class="pn">.</span><span class="id">Context</span><span class="pn">}</span>
                        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 198)" onmouseover="showTip(event, 'fs53', 198)" class="id">Evaluation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 199)" onmouseover="showTip(event, 'fs54', 199)" class="id">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 200)" onmouseover="showTip(event, 'fs55', 200)" class="id">evaluate</span> <span onmouseout="hideTip(event, 'fs86', 201)" onmouseover="showTip(event, 'fs86', 201)" class="id">testData</span><span class="pn">.</span><span class="id">Dataview</span>
                    
                    <span class="id">threshold</span><span class="pn">,</span><span class="id">newModel&#39;</span><span class="pn">.</span><span class="id">Accuracy</span>
                    <span class="c">//threshold,</span>
                    <span class="c">//exampleData </span>
                    <span class="c">//|&gt; (Prediction.BinaryClassification.predictDefaultCols newModel&#39;)</span>
                    <span class="c">//|&gt; Array.ofSeq</span>
                <span class="pn">)</span>




<span class="c">///</span>
<span class="c">// Evaluate the model using cross-validation.</span>
<span class="c">// Cross-validation splits our dataset into &#39;folds&#39;, trains a model on some folds and </span>
<span class="c">// evaluates it on the remaining fold. We are using 5 folds so we get back 5 sets of scores.</span>
<span class="c">// Let&#39;s compute the average AUC, which should be between 0.5 and 1 (higher is better).</span>
<span class="c">//let cvResults = mlContext.BinaryClassification.CrossValidate(data, estimatorModel.EstimatorChain |&gt; Estimator.downcastEstimator, numFolds = 5,stratificationColumn = null)</span>
<span class="c">//let avgAuc = cvResults |&gt; Seq.map (fun struct (metrics,_,_) -&gt; metrics.Auc) |&gt; Seq.average</span>
<span class="c">////printfn &quot;The AUC is %f&quot; avgAuc</span>




<span class="c">//model</span>
<span class="c">//|&gt; Evaluation.BinaryClassificationEvalute() data</span>

<span class="c">///// run till here, then continue, breaks </span>
<span class="c">//let x = out.Preview().ColumnView</span>
<span class="c">/// run till here, works</span>
<span class="c">//x |&gt; Seq.map (fun x -&gt; x.Column.Name)</span>

<span class="c">//let downcastOtherPipeline (pipeline : ITransformer) =</span>
<span class="c">//    match pipeline with</span>
<span class="c">//    | :? IPredictionTransformer&lt;IPredictor&gt; as p -&gt; p</span>
<span class="c">//    | _ -&gt; failwith &quot;The pipeline has to be an instance of IEstimator&lt;ITransformer&gt;.&quot;</span>

<span class="c">//let permutationMetrics = </span>
<span class="c">//    mlContext.BinaryClassification.PermutationFeatureImportance(model.LastTransformer |&gt; downcastOtherPipeline,out,&quot;Label&quot;,&quot;Features&quot;,false,permutationCount=1)</span>

<span class="c">// The dataset we have is skewed, as there are many more non-spam messages than spam messages.</span>
<span class="c">// While our model is relatively good at detecting the difference, this skewness leads it to always</span>
<span class="c">// say the message is not spam. We deal with this by lowering the threshold of the predictor. In reality,</span>
<span class="c">// it is useful to look at the precision-recall curve to identify the best possible threshold.</span>
<span class="c">//let newModel = </span>
<span class="c">//    let lastTransformer = </span>
<span class="c">//        BinaryPredictionTransformer&lt;IPredictorProducing&lt;float32&gt;&gt;(</span>
<span class="c">//            mlContext, </span>
<span class="c">//            model.LastTransformer.Model, </span>
<span class="c">//            model.GetOutputSchema(data.Schema), </span>
<span class="c">//            model.LastTransformer.FeatureColumn, </span>
<span class="c">//            threshold = 0.15f, </span>
<span class="c">//            thresholdColumn = DefaultColumnNames.Probability);</span>
<span class="c">//    let parts = model |&gt; Seq.toArray</span>
<span class="c">//    parts.[parts.Length - 1] &lt;- lastTransformer :&gt; _</span>
<span class="c">//    TransformerChain&lt;ITransformer&gt;(parts)</span>
</code></pre></td>
</tr>
</table>

<div class="tip" id="fs1">namespace FSharp</div>
<div class="tip" id="fs2">namespace FSharp.Plotly</div>
<div class="tip" id="fs3">namespace System</div>
<div class="tip" id="fs4">namespace Microsoft</div>
<div class="tip" id="fs5">namespace Microsoft.ML</div>
<div class="tip" id="fs6">namespace Microsoft.ML.Data</div>
<div class="tip" id="fs7">module FSharpML</div>
<div class="tip" id="fs8">namespace FSharpML.EstimatorModel</div>
<div class="tip" id="fs9">namespace FSharpML.TransformerModel</div>
<div class="tip" id="fs10">val mlContext : MLContext</div>
<div class="tip" id="fs11">Multiple items<br />type MLContext =<br />&#160;&#160;new : ?seed:Nullable&lt;int&gt; -&gt; MLContext<br />&#160;&#160;member AnomalyDetection : AnomalyDetectionCatalog<br />&#160;&#160;member BinaryClassification : BinaryClassificationCatalog<br />&#160;&#160;member Clustering : ClusteringCatalog<br />&#160;&#160;member ComponentCatalog : ComponentCatalog<br />&#160;&#160;member Data : DataOperationsCatalog<br />&#160;&#160;member Forecasting : ForecastingCatalog<br />&#160;&#160;member Model : ModelOperationsCatalog<br />&#160;&#160;member MulticlassClassification : MulticlassClassificationCatalog<br />&#160;&#160;member Ranking : RankingCatalog<br />&#160;&#160;...<br /><br />--------------------<br />MLContext(?seed: Nullable&lt;Microsoft.FSharp.Core.int&gt;) : MLContext</div>
<div class="tip" id="fs12">Multiple items<br />type Nullable =<br />&#160;&#160;static member Compare&lt;&#39;T&gt; : n1:Nullable&lt;&#39;T&gt; * n2:Nullable&lt;&#39;T&gt; -&gt; int<br />&#160;&#160;static member Equals&lt;&#39;T&gt; : n1:Nullable&lt;&#39;T&gt; * n2:Nullable&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;static member GetUnderlyingType : nullableType:Type -&gt; Type<br /><br />--------------------<br />type Nullable&lt;&#39;T (requires default constructor and value type and &#39;T :&gt; ValueType)&gt; =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : value:&#39;T -&gt; Nullable&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;member Equals : other:obj -&gt; bool<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member GetValueOrDefault : unit -&gt; &#39;T + 1 overload<br />&#160;&#160;&#160;&#160;member HasValue : bool<br />&#160;&#160;&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;&#160;&#160;member Value : &#39;T<br />&#160;&#160;end<br /><br />--------------------<br />Nullable ()<br />Nullable(value: &#39;T) : Nullable&lt;&#39;T&gt;</div>
<div class="tip" id="fs13">val trainDataPath : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs14">val data : IDataView</div>
<div class="tip" id="fs15">property MLContext.Data: DataOperationsCatalog with get</div>
<div class="tip" id="fs16">(extension) DataOperationsCatalog.LoadFromTextFile(path: Microsoft.FSharp.Core.string,?options: TextLoader.Options) : IDataView<br />(extension) DataOperationsCatalog.LoadFromTextFile&lt;&#39;TInput&gt;(path: Microsoft.FSharp.Core.string,?separatorChar: Microsoft.FSharp.Core.char,?hasHeader: Microsoft.FSharp.Core.bool,?allowQuoting: Microsoft.FSharp.Core.bool,?trimWhitespace: Microsoft.FSharp.Core.bool,?allowSparse: Microsoft.FSharp.Core.bool) : IDataView<br />(extension) DataOperationsCatalog.LoadFromTextFile(path: Microsoft.FSharp.Core.string, columns: TextLoader.Column Microsoft.FSharp.Core.[],?separatorChar: Microsoft.FSharp.Core.char,?hasHeader: Microsoft.FSharp.Core.bool,?allowQuoting: Microsoft.FSharp.Core.bool,?trimWhitespace: Microsoft.FSharp.Core.bool,?allowSparse: Microsoft.FSharp.Core.bool) : IDataView</div>
<div class="tip" id="fs17">type TextLoader =<br />&#160;&#160;member GetOutputSchema : unit -&gt; DataViewSchema<br />&#160;&#160;member Load : source:IMultiStreamSource -&gt; IDataView<br />&#160;&#160;nested type Column<br />&#160;&#160;nested type Options<br />&#160;&#160;nested type Range</div>
<div class="tip" id="fs18">type Column =<br />&#160;&#160;new : unit -&gt; Column + 3 overloads<br />&#160;&#160;val Name : string<br />&#160;&#160;val Source : Range[]<br />&#160;&#160;val KeyCount : KeyCount<br />&#160;&#160;member DataKind : DataKind with get, set</div>
<div class="tip" id="fs19">type DataKind =<br />&#160;&#160;| SByte = 1uy<br />&#160;&#160;| Byte = 2uy<br />&#160;&#160;| Int16 = 3uy<br />&#160;&#160;| UInt16 = 4uy<br />&#160;&#160;| Int32 = 5uy<br />&#160;&#160;| UInt32 = 6uy<br />&#160;&#160;| Int64 = 7uy<br />&#160;&#160;| UInt64 = 8uy<br />&#160;&#160;| Single = 9uy<br />&#160;&#160;| Double = 10uy<br />&#160;&#160;...</div>
<div class="tip" id="fs20">field DataKind.String: DataKind = 11uy</div>
<div class="tip" id="fs21">val estimatorChain : Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs22">Multiple items<br />type EstimatorChain&lt;&#39;TLastTransformer (requires reference type and &#39;TLastTransformer :&gt; ITransformer)&gt; =<br />&#160;&#160;new : unit -&gt; EstimatorChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;val LastEstimator : IEstimator&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member Append&lt;&#39;TNewTrans&gt; : estimator:IEstimator&lt;&#39;TNewTrans&gt; * ?scope:TransformerScope -&gt; EstimatorChain&lt;&#39;TNewTrans&gt;<br />&#160;&#160;member AppendCacheCheckpoint : env:IHostEnvironment -&gt; EstimatorChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member Fit : input:IDataView -&gt; TransformerChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member GetOutputSchema : inputSchema:SchemaShape -&gt; SchemaShape<br /><br />--------------------<br />EstimatorChain() : EstimatorChain&lt;&#39;TLastTransformer&gt;</div>
<div class="tip" id="fs23">module Estimator<br /><br />from FSharpML</div>
<div class="tip" id="fs24">val append : source1:IEstimator&lt;&#39;a&gt; -&gt; source2:IEstimator&lt;#ITransformer&gt; -&gt; EstimatorChain&lt;&#39;a&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs25">property MLContext.Transforms: TransformsCatalog with get</div>
<div class="tip" id="fs26">property TransformsCatalog.Conversion: TransformsCatalog.ConversionTransforms with get</div>
<div class="tip" id="fs27">(extension) TransformsCatalog.ConversionTransforms.MapValue&lt;&#39;TInputType,&#39;TOutputType&gt;(outputColumnName: Microsoft.FSharp.Core.string, keyValuePairs: Collections.Generic.IEnumerable&lt;Collections.Generic.KeyValuePair&lt;&#39;TInputType,&#39;TOutputType Microsoft.FSharp.Core.[]&gt;&gt;,?inputColumnName: Microsoft.FSharp.Core.string) : Transforms.ValueMappingEstimator&lt;&#39;TInputType,&#39;TOutputType&gt;<br />(extension) TransformsCatalog.ConversionTransforms.MapValue&lt;&#39;TInputType,&#39;TOutputType&gt;(outputColumnName: Microsoft.FSharp.Core.string, keyValuePairs: Collections.Generic.IEnumerable&lt;Collections.Generic.KeyValuePair&lt;&#39;TInputType,&#39;TOutputType&gt;&gt;,?inputColumnName: Microsoft.FSharp.Core.string,?treatValuesAsKeyType: Microsoft.FSharp.Core.bool) : Transforms.ValueMappingEstimator&lt;&#39;TInputType,&#39;TOutputType&gt;<br />(extension) TransformsCatalog.ConversionTransforms.MapValue(outputColumnName: Microsoft.FSharp.Core.string, lookupMap: IDataView, keyColumn: DataViewSchema.Column, valueColumn: DataViewSchema.Column,?inputColumnName: Microsoft.FSharp.Core.string) : Transforms.ValueMappingEstimator</div>
<div class="tip" id="fs28">module DefaultColumnNames<br /><br />from FSharpML</div>
<div class="tip" id="fs29">val Label : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs30">property TransformsCatalog.Text: TransformsCatalog.TextTransforms with get</div>
<div class="tip" id="fs31">(extension) TransformsCatalog.TextTransforms.FeaturizeText(outputColumnName: Microsoft.FSharp.Core.string,?inputColumnName: Microsoft.FSharp.Core.string) : Transforms.Text.TextFeaturizingEstimator<br />(extension) TransformsCatalog.TextTransforms.FeaturizeText(outputColumnName: Microsoft.FSharp.Core.string, options: Transforms.Text.TextFeaturizingEstimator.Options, [&lt;ParamArray&gt;] inputColumnNames: Microsoft.FSharp.Core.string Microsoft.FSharp.Core.[]) : Transforms.Text.TextFeaturizingEstimator</div>
<div class="tip" id="fs32">val Features : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs33">val appendCacheCheckpoint : mlContext:MLContext -&gt; pipeline:IEstimator&lt;&#39;a&gt; -&gt; IEstimator&lt;ITransformer&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs34">property MLContext.BinaryClassification: BinaryClassificationCatalog with get</div>
<div class="tip" id="fs35">property BinaryClassificationCatalog.Trainers: BinaryClassificationCatalog.BinaryClassificationTrainers with get</div>
<div class="tip" id="fs36">(extension) BinaryClassificationCatalog.BinaryClassificationTrainers.SdcaLogisticRegression(options: Trainers.SdcaLogisticRegressionBinaryTrainer.Options) : Trainers.SdcaLogisticRegressionBinaryTrainer<br />(extension) BinaryClassificationCatalog.BinaryClassificationTrainers.SdcaLogisticRegression(?labelColumnName: Microsoft.FSharp.Core.string,?featureColumnName: Microsoft.FSharp.Core.string,?exampleWeightColumnName: Microsoft.FSharp.Core.string,?l2Regularization: Nullable&lt;Microsoft.FSharp.Core.float32&gt;,?l1Regularization: Nullable&lt;Microsoft.FSharp.Core.float32&gt;,?maximumNumberOfIterations: Nullable&lt;Microsoft.FSharp.Core.int&gt;) : Trainers.SdcaLogisticRegressionBinaryTrainer</div>
<div class="tip" id="fs37">val estimatorModel : &#39;_arg3 (requires member ( |&gt; ) and &#39;a :&gt; ITransformer and reference type and member ( |&gt; ) and member ( |&gt; ) and member ( |&gt; ) and &#39;c :&gt; ITransformer and reference type and &#39;e :&gt; ITransformer and reference type and &#39;g :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs38">Multiple items<br />module EstimatorModel<br /><br />from FSharpML.EstimatorModel<br /><br />--------------------<br />namespace FSharpML.EstimatorModel<br /><br />--------------------<br />type EstimatorModel&lt;&#39;a (requires &#39;a :&gt; ITransformer and reference type)&gt; =<br />&#160;&#160;{ EstimatorChain: EstimatorChain&lt;&#39;a&gt;<br />&#160;&#160;&#160;&#160;Context: MLContext }</div>
<div class="tip" id="fs39">val create : mlContext:MLContext -&gt; EstimatorModel&lt;&#39;a&gt; (requires reference type and &#39;a :&gt; ITransformer)</div>
<div class="tip" id="fs40">val appendBy : transforming:(MLContext -&gt; #IEstimator&lt;&#39;c&gt;) -&gt; estimatorModel:EstimatorModel&lt;&#39;d&gt; -&gt; EstimatorModel&lt;&#39;c&gt; (requires &#39;c :&gt; ITransformer and reference type and &#39;d :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs41">val mlc : MLContext</div>
<div class="tip" id="fs42">val transformBy : transformsCatalog:(TransformsCatalog -&gt; #IEstimator&lt;&#39;b&gt;) -&gt; estimatorModel:EstimatorModel&lt;&#39;c&gt; -&gt; EstimatorModel&lt;&#39;b&gt; (requires &#39;b :&gt; ITransformer and reference type and &#39;c :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs43">val tfc : TransformsCatalog</div>
<div class="tip" id="fs44">val appendCacheCheckpoint : estimatorModel:EstimatorModel&lt;&#39;a&gt; -&gt; EstimatorModel&lt;&#39;a&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs45">val trainData : &#39;a</div>
<div class="tip" id="fs46">val testData : &#39;a</div>
<div class="tip" id="fs47">module DataModel<br /><br />from FSharpML</div>
<div class="tip" id="fs48">val ofDataview&lt;&#39;info&gt; : mlc:MLContext -&gt; dataview:IDataView -&gt; DataModel.DataModel&lt;Microsoft.FSharp.Core.obj&gt;</div>
<div class="tip" id="fs49">val trainTestSplit : testfraction:Microsoft.FSharp.Core.float -&gt; dataModel:DataModel.DataModel&lt;&#39;a&gt; -&gt; DataModel.DataModel&lt;DataModel.TrainTestSplitInfo&gt; * DataModel.DataModel&lt;DataModel.TrainTestSplitInfo&gt;</div>
<div class="tip" id="fs50">val trainedModel : &#39;_arg3 (requires member ( |&gt; ) and member ( |&gt; ) and member ( |&gt; ) and &#39;a :&gt; ITransformer and reference type and &#39;c :&gt; ITransformer and reference type and &#39;e :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs51">val fit : data:IDataView -&gt; estimatorModel:EstimatorModel&lt;&#39;a&gt; -&gt; TransformerModel&lt;&#39;a&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs52">val evaluationMetrics : &#39;_arg3</div>
<div class="tip" id="fs53">module Evaluation<br /><br />from FSharpML.TransformerModel</div>
<div class="tip" id="fs54">Multiple items<br />module BinaryClassification<br /><br />from FSharpML.TransformerModel.Evaluation<br /><br />--------------------<br />type BinaryClassification =<br />&#160;&#160;static member evaluateNonCalibratedWith : ?Label:string * ?Score:string * ?PredictedLabel:string -&gt; (IDataView -&gt; TransformerModel&lt;&#39;a0&gt; -&gt; BinaryClassificationMetrics) (requires &#39;a0 :&gt; ITransformer and reference type)<br />&#160;&#160;static member evaluateWith : ?Label:string * ?Score:string * ?Probability:string * ?PredictedLabel:string -&gt; (IDataView -&gt; TransformerModel&lt;&#39;a0&gt; -&gt; CalibratedBinaryClassificationMetrics) (requires &#39;a0 :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs55">val evaluate : data:IDataView -&gt; transformerModel:TransformerModel&lt;&#39;a&gt; -&gt; CalibratedBinaryClassificationMetrics (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs56">val scoredData : &#39;_arg3</div>
<div class="tip" id="fs57">Multiple items<br />module TransformerModel<br /><br />from FSharpML.TransformerModel<br /><br />--------------------<br />namespace FSharpML.TransformerModel<br /><br />--------------------<br />type TransformerModel&lt;&#39;a (requires &#39;a :&gt; ITransformer and reference type)&gt; =<br />&#160;&#160;{ TransformerChain: TransformerChain&lt;&#39;a&gt;<br />&#160;&#160;&#160;&#160;Context: MLContext }</div>
<div class="tip" id="fs58">val transform : data:IDataView -&gt; transformerModel:TransformerModel&lt;&#39;b&gt; -&gt; IDataView (requires &#39;b :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs59">type SpamInput =<br />&#160;&#160;{ LabelText: obj<br />&#160;&#160;&#160;&#160;Message: obj }</div>
<div class="tip" id="fs60">SpamInput.LabelText: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs61">SpamInput.Message: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs62">val exampleData : &#39;_arg3</div>
<div class="tip" id="fs63">val labels : &#39;a</div>
<div class="tip" id="fs64">val counts : &#39;a</div>
<div class="tip" id="fs65">module Seq<br /><br />from FSharp.Plotly</div>
<div class="tip" id="fs66">val unzip : input:Microsoft.FSharp.Collections.seq&lt;&#39;a * &#39;b&gt; -&gt; Microsoft.FSharp.Collections.seq&lt;&#39;a&gt; * Microsoft.FSharp.Collections.seq&lt;&#39;b&gt;</div>
<div class="tip" id="fs67">val LabelDist : &#39;a</div>
<div class="tip" id="fs68">type Chart =<br />&#160;&#160;static member Area : xy:seq&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?ShowMarkers:bool * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Dash:DrawingStyle * ?Width:&#39;a4 -&gt; GenericChart<br />&#160;&#160;static member Area : x:seq&lt;#IConvertible&gt; * y:seq&lt;#IConvertible&gt; * ?Name:string * ?ShowMarkers:bool * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Dash:DrawingStyle * ?Width:&#39;a4 -&gt; GenericChart<br />&#160;&#160;static member Bar : keysvalues:seq&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Marker:Marker -&gt; GenericChart<br />&#160;&#160;static member Bar : keys:seq&lt;#IConvertible&gt; * values:seq&lt;#IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Marker:Marker -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : xy:seq&lt;&#39;a0 * &#39;a1&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Fillcolor:&#39;a3 * ?Opacity:float * ?Whiskerwidth:&#39;a4 * ?Boxpoints:Boxpoints * ?Boxmean:BoxMean * ?Jitter:&#39;a5 * ?Pointpos:&#39;a6 * ?Orientation:Orientation -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : ?x:&#39;a0 * ?y:&#39;a1 * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Fillcolor:&#39;a3 * ?Opacity:float * ?Whiskerwidth:&#39;a4 * ?Boxpoints:Boxpoints * ?Boxmean:BoxMean * ?Jitter:&#39;a5 * ?Pointpos:&#39;a6 * ?Orientation:Orientation -&gt; GenericChart<br />&#160;&#160;static member Bubble : xysizes:seq&lt;#IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:&#39;a3 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font -&gt; GenericChart<br />&#160;&#160;static member Bubble : x:seq&lt;#IConvertible&gt; * y:seq&lt;#IConvertible&gt; * sizes:seq&lt;#IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:&#39;a3 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font -&gt; GenericChart<br />&#160;&#160;static member ChoroplethMap : locations:seq&lt;string&gt; * z:seq&lt;#IConvertible&gt; * ?Text:seq&lt;#IConvertible&gt; * ?Locationmode:LocationFormat * ?Autocolorscale:bool * ?Colorscale:Colorscale * ?Colorbar:&#39;a2 * ?Marker:Marker * ?Zmin:&#39;a3 * ?Zmax:&#39;a4 -&gt; GenericChart<br />&#160;&#160;static member Column : keysvalues:seq&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;#IConvertible&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Marker:Marker -&gt; GenericChart<br />&#160;&#160;...</div>
<div class="tip" id="fs69">static member Chart.Doughnut : data:Microsoft.FSharp.Collections.seq&lt;#IConvertible * #IConvertible&gt; * ?Name:Microsoft.FSharp.Core.string * ?Showlegend:Microsoft.FSharp.Core.bool * ?Color:&#39;a2 * ?Hole:Microsoft.FSharp.Core.float * ?TextPosition:StyleParam.TextPosition * ?TextFont:Font * ?Hoverinfo:Microsoft.FSharp.Core.string * ?Textinfo:&#39;a3 * ?Opacity:Microsoft.FSharp.Core.float -&gt; GenericChart.GenericChart<br />static member Chart.Doughnut : values:&#39;a0 * ?Labels:Microsoft.FSharp.Collections.seq&lt;#IConvertible&gt; * ?Name:Microsoft.FSharp.Core.string * ?Showlegend:Microsoft.FSharp.Core.bool * ?Color:&#39;a2 * ?Hole:Microsoft.FSharp.Core.float * ?TextPosition:StyleParam.TextPosition * ?TextFont:Font * ?Hoverinfo:Microsoft.FSharp.Core.string * ?Textinfo:&#39;a3 * ?Opacity:Microsoft.FSharp.Core.float -&gt; GenericChart.GenericChart</div>
<div class="tip" id="fs70">val probabilityHist : &#39;_arg3</div>
<div class="tip" id="fs71">val scoredData : &#39;a Microsoft.FSharp.Core.[]</div>
<div class="tip" id="fs72">val Probability : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs73">static member Chart.Histogram : data:Microsoft.FSharp.Collections.seq&lt;#IConvertible&gt; * ?Orientation:StyleParam.Orientation * ?Name:Microsoft.FSharp.Core.string * ?Showlegend:Microsoft.FSharp.Core.bool * ?Opacity:Microsoft.FSharp.Core.float * ?Color:&#39;a1 * ?HistNorm:StyleParam.HistNorm * ?HistFunc:StyleParam.HistNorm * ?nBinsx:Microsoft.FSharp.Core.int * ?nBinsy:Microsoft.FSharp.Core.int * ?Xbins:Bins * ?Ybins:Bins * ?xError:&#39;a2 * ?yError:&#39;a3 -&gt; GenericChart.GenericChart</div>
<div class="tip" id="fs74">static member Chart.Combine : gCharts:Microsoft.FSharp.Collections.seq&lt;GenericChart.GenericChart&gt; -&gt; GenericChart.GenericChart</div>
<div class="tip" id="fs75">val ScoreHist : &#39;_arg3</div>
<div class="tip" id="fs76">val Score : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs77">val stackedChart : &#39;_arg3</div>
<div class="tip" id="fs78">static member Chart.Stack : ?Columns:Microsoft.FSharp.Core.int * ?Space:Microsoft.FSharp.Core.float -&gt; (#Microsoft.FSharp.Collections.seq&lt;GenericChart.GenericChart&gt; -&gt; GenericChart.GenericChart)</div>
<div class="tip" id="fs79">static member Chart.withSize : width:Microsoft.FSharp.Core.float * heigth:Microsoft.FSharp.Core.float -&gt; (GenericChart.GenericChart -&gt; GenericChart.GenericChart)</div>
<div class="tip" id="fs80">val idea : &#39;_arg3</div>
<div class="tip" id="fs81">val thresholdVSPrecicionAndRecall : &#39;_arg3</div>
<div class="tip" id="fs82">type BinaryPredictionTransformer&lt;&#39;TModel (requires reference type)&gt; =<br />&#160;&#160;inherit SingleFeaturePredictionTransformerBase&lt;&#39;TModel&gt;</div>
<div class="tip" id="fs83">val trainedModel : &#39;a Microsoft.FSharp.Core.[]</div>
<div class="tip" id="fs84">Multiple items<br />type TransformerChain&lt;&#39;TLastTransformer (requires reference type and &#39;TLastTransformer :&gt; ITransformer)&gt; =<br />&#160;&#160;new : [&lt;ParamArray&gt;] transformers:ITransformer[] -&gt; TransformerChain&lt;&#39;TLastTransformer&gt; + 1 overload<br />&#160;&#160;val LastTransformer : &#39;TLastTransformer<br />&#160;&#160;member Append&lt;&#39;TNewLast&gt; : transformer:&#39;TNewLast * ?scope:TransformerScope -&gt; TransformerChain&lt;&#39;TNewLast&gt;<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator&lt;ITransformer&gt;<br />&#160;&#160;member GetModelFor : scopeFilter:TransformerScope -&gt; TransformerChain&lt;ITransformer&gt;<br />&#160;&#160;member GetOutputSchema : inputSchema:DataViewSchema -&gt; DataViewSchema<br />&#160;&#160;member Transform : input:IDataView -&gt; IDataView<br /><br />--------------------<br />TransformerChain([&lt;ParamArray&gt;] transformers: ITransformer Microsoft.FSharp.Core.[]) : TransformerChain&lt;&#39;TLastTransformer&gt;<br />TransformerChain(transformers: Collections.Generic.IEnumerable&lt;ITransformer&gt;, scopes: Collections.Generic.IEnumerable&lt;TransformerScope&gt;) : TransformerChain&lt;&#39;TLastTransformer&gt;</div>
<div class="tip" id="fs85">type ITransformer =<br />&#160;&#160;inherit ICanSaveModel<br />&#160;&#160;member GetOutputSchema : inputSchema:DataViewSchema -&gt; DataViewSchema<br />&#160;&#160;member GetRowToRowMapper : inputSchema:DataViewSchema -&gt; IRowToRowMapper<br />&#160;&#160;member IsRowToRowMapper : bool<br />&#160;&#160;member Transform : input:IDataView -&gt; IDataView</div>
<div class="tip" id="fs86">val testData : &#39;a Microsoft.FSharp.Core.[]</div>

            </div>
            <div class="span3">
                <img src="https://CSBiology.github.io/FSharpML//img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
                <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
                    <li class="nav-header">BioFSharp</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//index.html">Home page</a></li>
                    <li class="divider"></li>
                    <li><a href="https://CSBiology.github.io/FSharpML//release-notes.html">Release Notes</a></li>

                    <li class="nav-header">Samples</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//BinaryClass_SentimentAnalysis.html">Binary classification: sentiment analysis</a></li>
                    <li><a href="https://CSBiology.github.io/FSharpML//BinaryClass_SpamDetection.html">Binary classification: spam detection</a></li>


                    <li><a href="https://CSBiology.github.io/FSharpML//Regression_PricePrediction.html">Regression: price prediction</a></li>


                    <li><a href="https://CSBiology.github.io/FSharpML//Clustering_IrisFlowers.html">Clustering: iris flowers</a></li>

                    <li class="nav-header">Documentation</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//reference/index.html">API Reference</a></li>


                </ul>
            </div>
        </div>
    </div>
    <a href="https://github.com/CSBiology/FSharpML"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub" /></a>
</body>
</html>