<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Tutorial: spam detection
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Library for the FSharp friendly usage of the ML.NET project. For documentation visit: <https://csbiology.github.io/FSharpML/>" />
    <meta name="author" content="Timo Mï¿½hlhaus, Kevin Schneider, Heinrich Lukas Weil, David Zimmer, F# open source contributors" />

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet" />
    <meta http-equiv="X-UA-Compatible" content="IE=11">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://CSBiology.github.io/FSharpML//content/style.css" /> <!--https://CSBiology.github.io/FSharpML/-->
    <link type="text/css" rel="stylesheet" href="https://CSBiology.github.io/FSharpML//style/CSBstyle.css" /> <!--https://CSBiology.github.io/FSharpML/-->
    <script type="text/javascript" src="https://CSBiology.github.io/FSharpML//content/tips.js"></script> <!--https://CSBiology.github.io/FSharpML/-->
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>
    <div class="container">
        <div class="masthead">
            <ul class="nav nav-pills pull-right">
                <li><a href="http://fsharp.org">fsharp.org</a></li>
                <li><a href="https://github.com/CSBiology/FSharpML">github page</a></li>
            </ul>
            <h3 class="muted"><a href="https://CSBiology.github.io/FSharpML//index.html">BioFSharp</a></h3>
        </div>
        <hr />
        <div class="row">
            <div class="span9" id="main">
                <h1><a name="Tutorial-spam-detection" class="anchor" href="#Tutorial-spam-detection">Tutorial: spam detection</a></h1>
<p>FSharpML is a functional-friendly lightweight wrapper of the powerful <a href="https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet">ML.Net</a> library. It is designed to enable users to explore ML.Net in a scriptable manner, while maintaining the functional style of F#.</p>
<p>After installing the package via Nuget we can load the delivered reference script and start using ML.Net in conjunction with FSharpML.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#load</span> <span class="s">&quot;../../FSharpML.fsx&quot;</span>


<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="id">ML</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 5)" onmouseover="showTip(event, 'fs3', 5)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="id">ML</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="id">FSharpML</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="id">TransformerModel</span>
</code></pre></td>
</tr>
</table>
<p>To get a feel how this library handles ML.Net operations we rebuild the <a href="https://github.com/dotnet/machinelearning-samples/tree/master/samples/fsharp/getting-started/BinaryClassification_SpamDetection">Spam Detection tutorial</a> given by ML.Net.
We will start by instantiating a MLContext, the heart of the ML.Net API and intended to serve as a method catalog. We will now use it to set a scope on data stored in a text file. The method name might be misleading, but ML.Net readers are lazy and
the reading process will start when the data is processed <a href="https://github.com/dotnet/machinelearning/blob/master/docs/code/IDataViewTypeSystem.md#standard-column-types">(see).</a></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="id">mlContext</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="rt">MLContext</span><span class="pn">(</span><span class="id">seed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="vt">Nullable</span> <span class="n">1</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="id">trainDataPath</span>  <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span>  <span class="o">+</span> <span class="s">&quot;./data/SMSSpamCollection.txt&quot;</span><span class="pn">)</span>
    
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 14)" onmouseover="showTip(event, 'fs12', 14)" class="id">data</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs8', 15)" onmouseover="showTip(event, 'fs8', 15)" class="id">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="id">Data</span><span class="pn">.</span><span class="id">ReadFromTextFile</span><span class="pn">(</span> 
            <span class="id">path</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 17)" onmouseover="showTip(event, 'fs11', 17)" class="id">trainDataPath</span><span class="pn">,</span>
            <span class="id">columns</span> <span class="o">=</span> 
                <span class="pn">[|</span>
                    <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="id">TextLoader</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 19)" onmouseover="showTip(event, 'fs15', 19)" class="id">Column</span><span class="pn">(</span><span class="s">&quot;LabelText&quot;</span> <span class="pn">,</span> <span onmouseout="hideTip(event, 'fs10', 20)" onmouseover="showTip(event, 'fs10', 20)" class="id">Nullable</span> <span onmouseout="hideTip(event, 'fs16', 21)" onmouseover="showTip(event, 'fs16', 21)" class="id">DataKind</span><span class="pn">.</span><span class="id">Text</span><span class="pn">,</span> <span class="n">0</span><span class="pn">)</span>
                    <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="id">TextLoader</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="id">Column</span><span class="pn">(</span><span class="s">&quot;Message&quot;</span> <span class="pn">,</span> <span onmouseout="hideTip(event, 'fs10', 24)" onmouseover="showTip(event, 'fs10', 24)" class="id">Nullable</span> <span onmouseout="hideTip(event, 'fs16', 25)" onmouseover="showTip(event, 'fs16', 25)" class="id">DataKind</span><span class="pn">.</span><span class="id">Text</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span>
                <span class="pn">|]</span><span class="pn">,</span>
            <span class="id">hasHeader</span> <span class="o">=</span> <span class="k">false</span><span class="pn">,</span>
            <span class="id">separatorChar</span> <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>Now that we told our interactive environment about the data we can start thinking about a model (EstimatorChain in the ML.Net jargon)
we want to build. As the MLContext serves as a catalog we will use it to draw transformations that can be appended to form a estimator chain.
At this point we will see FSharpML comming into play enabling us to use the beloved pipelining style familiar to FSharp users.
We will now create an EstimatorChain which converts the text label to a bool then featurizes the text, and add a linear trainer.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="id">estimatorChain</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs18', 27)" onmouseover="showTip(event, 'fs18', 27)" class="rt">EstimatorChain</span><span class="pn">(</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 28)" onmouseover="showTip(event, 'fs19', 28)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 29)" onmouseover="showTip(event, 'fs20', 29)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 30)" onmouseover="showTip(event, 'fs8', 30)" class="id">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 31)" onmouseover="showTip(event, 'fs21', 31)" class="id">Transforms</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 32)" onmouseover="showTip(event, 'fs22', 32)" class="id">Conversion</span><span class="pn">.</span><span class="id">ValueMap</span><span class="pn">(</span><span class="pn">[</span><span class="s">&quot;ham&quot;</span><span class="pn">;</span> <span class="s">&quot;spam&quot;</span><span class="pn">]</span><span class="pn">,</span><span class="pn">[</span><span class="k">false</span><span class="pn">;</span> <span class="k">true</span><span class="pn">]</span><span class="pn">,</span><span class="pn">[|</span> <span class="k">struct</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 33)" onmouseover="showTip(event, 'fs23', 33)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 34)" onmouseover="showTip(event, 'fs24', 34)" class="id">Label</span><span class="pn">,</span> <span class="s">&quot;LabelText&quot;</span><span class="pn">)</span> <span class="pn">|]</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 35)" onmouseover="showTip(event, 'fs19', 35)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 36)" onmouseover="showTip(event, 'fs20', 36)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 37)" onmouseover="showTip(event, 'fs8', 37)" class="fn">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="id">Transforms</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 39)" onmouseover="showTip(event, 'fs25', 39)" class="id">Text</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 40)" onmouseover="showTip(event, 'fs26', 40)" class="id">FeaturizeText</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 41)" onmouseover="showTip(event, 'fs23', 41)" class="m">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 42)" onmouseover="showTip(event, 'fs27', 42)" class="id">Features</span><span class="pn">,</span> <span class="s">&quot;Message&quot;</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs19', 43)" onmouseover="showTip(event, 'fs19', 43)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs28', 44)" onmouseover="showTip(event, 'fs28', 44)" class="id">appendCacheCheckpoint</span> <span onmouseout="hideTip(event, 'fs8', 45)" onmouseover="showTip(event, 'fs8', 45)" class="id">mlContext</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 46)" onmouseover="showTip(event, 'fs19', 46)" class="m">Estimator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 47)" onmouseover="showTip(event, 'fs20', 47)" class="id">append</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="id">mlContext</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 49)" onmouseover="showTip(event, 'fs29', 49)" class="id">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 50)" onmouseover="showTip(event, 'fs30', 50)" class="id">Trainers</span><span class="pn">.</span><span class="id">StochasticDualCoordinateAscent</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 51)" onmouseover="showTip(event, 'fs23', 51)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 52)" onmouseover="showTip(event, 'fs24', 52)" class="id">Label</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 53)" onmouseover="showTip(event, 'fs23', 53)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 54)" onmouseover="showTip(event, 'fs27', 54)" class="id">Features</span><span class="pn">)</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>This is already pretty fsharp-friendly but we thought we could even closer by releaving us from carring around our instance of the MLContext
explicitly. For this we created the type EstimatorModel which contains our EstimatorChain and the context. By Calling append by we only have to provide a
lambda expression were we can define which method we want of our context.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 55)" onmouseover="showTip(event, 'fs31', 55)" class="id">estimatorModel</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs32', 56)" onmouseover="showTip(event, 'fs32', 56)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">create</span> <span onmouseout="hideTip(event, 'fs8', 57)" onmouseover="showTip(event, 'fs8', 57)" class="id">mlContext</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 58)" onmouseover="showTip(event, 'fs32', 58)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">appendBy</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">mlc</span> <span class="k">-&gt;</span> <span class="id">mlc</span><span class="pn">.</span><span class="id">Transforms</span><span class="pn">.</span><span class="id">Conversion</span><span class="pn">.</span><span class="id">ValueMap</span><span class="pn">(</span><span class="pn">[</span><span class="s">&quot;ham&quot;</span><span class="pn">;</span> <span class="s">&quot;spam&quot;</span><span class="pn">]</span><span class="pn">,</span><span class="pn">[</span><span class="k">false</span><span class="pn">;</span> <span class="k">true</span><span class="pn">]</span><span class="pn">,</span><span class="pn">[|</span> <span class="k">struct</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 59)" onmouseover="showTip(event, 'fs23', 59)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 60)" onmouseover="showTip(event, 'fs24', 60)" class="id">Label</span><span class="pn">,</span> <span class="s">&quot;LabelText&quot;</span><span class="pn">)</span> <span class="pn">|]</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 61)" onmouseover="showTip(event, 'fs32', 61)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">appendBy</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">mlc</span> <span class="k">-&gt;</span> <span class="id">mlc</span><span class="pn">.</span><span class="id">Transforms</span><span class="pn">.</span><span class="id">Text</span><span class="pn">.</span><span class="id">FeaturizeText</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 62)" onmouseover="showTip(event, 'fs23', 62)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 63)" onmouseover="showTip(event, 'fs27', 63)" class="id">Features</span><span class="pn">,</span> <span class="s">&quot;Message&quot;</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 64)" onmouseover="showTip(event, 'fs32', 64)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">appendCacheCheckpoint</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 65)" onmouseover="showTip(event, 'fs32', 65)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">appendBy</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">mlc</span> <span class="k">-&gt;</span> <span class="id">mlc</span><span class="pn">.</span><span class="id">BinaryClassification</span><span class="pn">.</span><span class="id">Trainers</span><span class="pn">.</span><span class="id">StochasticDualCoordinateAscent</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs23', 66)" onmouseover="showTip(event, 'fs23', 66)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 67)" onmouseover="showTip(event, 'fs24', 67)" class="id">Label</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 68)" onmouseover="showTip(event, 'fs23', 68)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 69)" onmouseover="showTip(event, 'fs27', 69)" class="id">Features</span><span class="pn">)</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>Way better. Now we can concentrate on machine learning. So lets start by fitting our EstimatorModel to the complete data set.
The return value of this process is a so called TransformerModel, which contains a trained EstimatorChain
and can be used to transform unseen data. For this we want to split the data we previously put in scope into
two fractions. One to train the model and a remainder to evaluate the model.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 70)" onmouseover="showTip(event, 'fs33', 70)" class="id">trainTestSplit</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs12', 71)" onmouseover="showTip(event, 'fs12', 71)" class="id">data</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs34', 72)" onmouseover="showTip(event, 'fs34', 72)" class="m">Data</span><span class="pn">.</span><span class="id">BinaryClassification</span><span class="pn">.</span><span class="id">initTrainTestSplit</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs31', 73)" onmouseover="showTip(event, 'fs31', 73)" class="id">estimatorModel</span><span class="pn">.</span><span class="id">Context</span><span class="pn">,</span><span class="id">Testfraction</span><span class="o">=</span><span class="n">0.1</span><span class="pn">)</span> 

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 74)" onmouseover="showTip(event, 'fs35', 74)" class="id">trainedModel</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs36', 75)" onmouseover="showTip(event, 'fs36', 75)" class="id">estimatorModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 76)" onmouseover="showTip(event, 'fs32', 76)" class="id">EstimatorModel</span><span class="pn">.</span><span class="id">fit</span> <span onmouseout="hideTip(event, 'fs33', 77)" onmouseover="showTip(event, 'fs33', 77)" class="id">trainTestSplit</span><span class="pn">.</span><span class="id">TrainingData</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 78)" onmouseover="showTip(event, 'fs37', 78)" class="id">evaluationMetrics</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs35', 79)" onmouseover="showTip(event, 'fs35', 79)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 80)" onmouseover="showTip(event, 'fs38', 80)" class="m">Evaluation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 81)" onmouseover="showTip(event, 'fs39', 81)" class="m">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 82)" onmouseover="showTip(event, 'fs40', 82)" class="id">evaluate</span> <span onmouseout="hideTip(event, 'fs33', 83)" onmouseover="showTip(event, 'fs33', 83)" class="id">trainTestSplit</span><span class="pn">.</span><span class="id">TestData</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 84)" onmouseover="showTip(event, 'fs41', 84)" class="id">scoredData</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs35', 85)" onmouseover="showTip(event, 'fs35', 85)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs42', 86)" onmouseover="showTip(event, 'fs42', 86)" class="m">TransformerModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 87)" onmouseover="showTip(event, 'fs43', 87)" class="id">transform</span> <span onmouseout="hideTip(event, 'fs12', 88)" onmouseover="showTip(event, 'fs12', 88)" class="id">data</span> 

<span onmouseout="hideTip(event, 'fs37', 89)" onmouseover="showTip(event, 'fs37', 89)" class="id">evaluationMetrics</span><span class="pn">.</span><span class="id">Accuracy</span>
</code></pre></td>
</tr>
</table>
<p>Now that we can examine the metrics of our model evaluation, see that we have a accuracy of 0.99
and be tempted to use it in production so lets test it first with some examples.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs44', 90)" onmouseover="showTip(event, 'fs44', 90)" class="rt">SpamInput</span> <span class="o">=</span> 
    <span class="pn">{</span>
        <span onmouseout="hideTip(event, 'fs45', 91)" onmouseover="showTip(event, 'fs45', 91)" class="id">LabelText</span> <span class="pn">:</span> <span class="id">string</span>
        <span onmouseout="hideTip(event, 'fs46', 92)" onmouseover="showTip(event, 'fs46', 92)" class="id">Message</span> <span class="pn">:</span> <span class="id">string</span>
    <span class="pn">}</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 93)" onmouseover="showTip(event, 'fs47', 93)" class="id">exampleData</span> <span class="o">=</span> 
    <span class="pn">[</span>
        <span class="s">&quot;That&#39;s a great idea. It should work.&quot;</span>
        <span class="s">&quot;free medicine winner! congratulations&quot;</span>
        <span class="s">&quot;Yes we should meet over the weekend!&quot;</span>
        <span class="s">&quot;you win pills and free entry vouchers&quot;</span>
    <span class="pn">]</span> 
    <span class="o">|&gt;</span> <span class="id">List</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">message</span> <span class="k">-&gt;</span><span class="pn">{</span><span class="id">LabelText</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="pn">;</span> <span class="id">Message</span> <span class="o">=</span> <span class="id">message</span><span class="pn">}</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs47', 94)" onmouseover="showTip(event, 'fs47', 94)" class="id">exampleData</span> 
<span class="o">|&gt;</span> <span class="pn">(</span><span class="id">Prediction</span><span class="pn">.</span><span class="id">BinaryClassification</span><span class="pn">.</span><span class="id">predictDefaultCols</span> <span onmouseout="hideTip(event, 'fs35', 95)" onmouseover="showTip(event, 'fs35', 95)" class="id">trainedModel</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs48', 96)" onmouseover="showTip(event, 'fs48', 96)" class="id">Array</span><span class="pn">.</span><span class="id">ofSeq</span>
</code></pre></td>
</tr>
</table>
<p>As we see, even so our accuracy when evaluating the model on the test data set was very high, it does not set the correct lable true, to the
second and the fourth message which look a lot like spam. Lets examine our training data set:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs41', 97)" onmouseover="showTip(event, 'fs41', 97)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 98)" onmouseover="showTip(event, 'fs8', 98)" class="id">mlContext</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 99)" onmouseover="showTip(event, 'fs23', 99)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 100)" onmouseover="showTip(event, 'fs24', 100)" class="id">Label</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">countBy</span> <span class="id">id</span>
<span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">unzip</span>
<span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Doughnut</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>No value has been returned</code></pre></td></tr></table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span>
    <span onmouseout="hideTip(event, 'fs49', 101)" onmouseover="showTip(event, 'fs49', 101)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 102)" onmouseover="showTip(event, 'fs8', 102)" class="id">mlContext</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 103)" onmouseover="showTip(event, 'fs23', 103)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 104)" onmouseover="showTip(event, 'fs24', 104)" class="id">Label</span><span class="pn">)</span> 
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">zip</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 105)" onmouseover="showTip(event, 'fs49', 105)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 106)" onmouseover="showTip(event, 'fs8', 106)" class="id">mlContext</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 107)" onmouseover="showTip(event, 'fs23', 107)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 108)" onmouseover="showTip(event, 'fs50', 108)" class="id">Probability</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">groupBy</span> <span class="id">snd</span> 
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="id">label</span><span class="pn">,</span><span class="id">x</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span class="id">x</span>
                    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="id">fst</span>
                    <span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Histogram</span>
                <span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Combine</span>



    <span onmouseout="hideTip(event, 'fs49', 109)" onmouseover="showTip(event, 'fs49', 109)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">bool</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 110)" onmouseover="showTip(event, 'fs8', 110)" class="id">mlContext</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 111)" onmouseover="showTip(event, 'fs23', 111)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 112)" onmouseover="showTip(event, 'fs24', 112)" class="id">Label</span><span class="pn">)</span> 
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">zip</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 113)" onmouseover="showTip(event, 'fs49', 113)" class="id">scoredData</span><span class="pn">.</span><span class="id">GetColumn</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 114)" onmouseover="showTip(event, 'fs8', 114)" class="id">mlContext</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs23', 115)" onmouseover="showTip(event, 'fs23', 115)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 116)" onmouseover="showTip(event, 'fs51', 116)" class="id">Score</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">groupBy</span> <span class="id">snd</span> 
    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="id">label</span><span class="pn">,</span><span class="id">x</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span class="id">x</span>
                    <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">map</span> <span class="id">fst</span>
                    <span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Histogram</span>
                <span class="pn">)</span>
    <span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Combine</span>
<span class="pn">]</span>
<span class="o">|&gt;</span> <span class="id">Chart</span><span class="pn">.</span><span class="id">Stack</span><span class="pn">(</span><span class="n">2</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>No value has been returned</code></pre></td></tr></table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    
</code></pre></td>
</tr>
</table>
<p>The chart clearly shows that the data we learned uppon is highly inhomogenous. We have a lot more ham than spam, which is generally preferable but
but our models labeling threshold is clearly to high. Lets have a look at the precision recall curves of our model. For this we will evaluate the model
with different thresholds and plot both</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 117)" onmouseover="showTip(event, 'fs52', 117)" class="id">idea</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs35', 118)" onmouseover="showTip(event, 'fs35', 118)" class="id">trainedModel</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs42', 119)" onmouseover="showTip(event, 'fs42', 119)" class="m">TransformerModel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 120)" onmouseover="showTip(event, 'fs43', 120)" class="id">transform</span> <span onmouseout="hideTip(event, 'fs12', 121)" onmouseover="showTip(event, 'fs12', 121)" class="id">data</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 122)" onmouseover="showTip(event, 'fs53', 122)" class="id">thresholdVSPrecicionAndRecall</span> <span class="o">=</span> 
    <span class="pn">[</span><span class="o">-</span><span class="n">0.05</span> <span class="o">..</span> <span class="n">0.05</span> <span class="o">..</span> <span class="n">0.95</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="id">List</span><span class="pn">.</span><span class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">threshold</span> <span class="k">-&gt;</span>
                    <span class="k">let</span> <span class="id">newModel</span> <span class="o">=</span> 
                        <span class="k">let</span> <span class="id">lastTransformer</span> <span class="o">=</span> 
                            <span onmouseout="hideTip(event, 'fs54', 123)" onmouseover="showTip(event, 'fs54', 123)" class="id">BinaryPredictionTransformer</span><span class="pn">&lt;</span><span class="id">IPredictorProducing</span><span class="pn">&lt;</span><span class="id">float32</span><span class="pn">&gt;</span><span class="pn">&gt;</span><span class="pn">(</span>
                                <span onmouseout="hideTip(event, 'fs35', 124)" onmouseover="showTip(event, 'fs35', 124)" class="id">trainedModel</span><span class="pn">.</span><span class="id">Context</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs55', 125)" onmouseover="showTip(event, 'fs55', 125)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">LastTransformer</span><span class="pn">.</span><span class="id">Model</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs55', 126)" onmouseover="showTip(event, 'fs55', 126)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">GetOutputSchema</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs52', 127)" onmouseover="showTip(event, 'fs52', 127)" class="id">idea</span><span class="pn">.</span><span class="id">Schema</span><span class="pn">)</span><span class="pn">,</span> 
                                <span onmouseout="hideTip(event, 'fs55', 128)" onmouseover="showTip(event, 'fs55', 128)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span><span class="pn">.</span><span class="id">LastTransformer</span><span class="pn">.</span><span class="id">FeatureColumn</span><span class="pn">,</span> 
                                <span class="id">threshold</span> <span class="o">=</span> <span class="id">float32</span> <span class="id">threshold</span><span class="pn">,</span> 
                                <span class="id">thresholdColumn</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 129)" onmouseover="showTip(event, 'fs23', 129)" class="id">DefaultColumnNames</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 130)" onmouseover="showTip(event, 'fs50', 130)" class="id">Probability</span><span class="pn">)</span>
                        <span class="k">let</span> <span class="id">parts</span> <span class="o">=</span> 
                            <span onmouseout="hideTip(event, 'fs55', 131)" onmouseover="showTip(event, 'fs55', 131)" class="id">trainedModel</span><span class="pn">.</span><span class="id">TransformerChain</span> 
                            <span class="o">|&gt;</span> <span class="id">Seq</span><span class="pn">.</span><span class="id">toArray</span>
                            <span class="o">|&gt;</span> <span class="k">fun</span> <span class="id">x</span> <span class="k">-&gt;</span><span class="id">x</span><span class="pn">.</span><span class="pn">[</span><span class="o">..</span><span class="id">x</span><span class="pn">.</span><span class="id">Length</span><span class="o">-</span><span class="n">2</span><span class="pn">]</span> 
                        
                        <span class="id">printfn</span> <span class="s">&quot;%A, %A&quot;</span> <span class="id">lastTransformer</span><span class="pn">.</span><span class="id">Threshold</span> <span class="id">lastTransformer</span><span class="pn">.</span><span class="id">ThresholdColumn</span>
                        <span onmouseout="hideTip(event, 'fs56', 132)" onmouseover="showTip(event, 'fs56', 132)" class="id">TransformerChain</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs3', 133)" onmouseover="showTip(event, 'fs3', 133)" class="id">Microsoft</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 134)" onmouseover="showTip(event, 'fs4', 134)" class="id">ML</span><span class="pn">.</span><span class="id">Core</span><span class="pn">.</span><span class="id">Data</span><span class="pn">.</span><span class="id">ITransformer</span><span class="pn">&gt;</span><span class="pn">(</span><span class="id">parts</span><span class="pn">)</span><span class="pn">.</span><span class="id">Append</span><span class="pn">(</span><span class="id">lastTransformer</span><span class="pn">)</span>
                    <span class="k">let</span> <span class="id">newModel&#39;</span> <span class="o">=</span> 
                        <span class="pn">{</span><span onmouseout="hideTip(event, 'fs42', 135)" onmouseover="showTip(event, 'fs42', 135)" class="id">TransformerModel</span><span class="pn">.</span><span class="id">TransformerChain</span> <span class="o">=</span> <span class="id">newModel</span><span class="pn">;</span><span class="id">Context</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs55', 136)" onmouseover="showTip(event, 'fs55', 136)" class="id">trainedModel</span><span class="pn">.</span><span class="id">Context</span><span class="pn">}</span>
                        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs38', 137)" onmouseover="showTip(event, 'fs38', 137)" class="id">Evaluation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 138)" onmouseover="showTip(event, 'fs39', 138)" class="id">BinaryClassification</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 139)" onmouseover="showTip(event, 'fs40', 139)" class="id">evaluate</span> <span onmouseout="hideTip(event, 'fs33', 140)" onmouseover="showTip(event, 'fs33', 140)" class="id">trainTestSplit</span><span class="pn">.</span><span class="id">TestData</span>
                    
                    <span class="id">threshold</span><span class="pn">,</span><span class="id">newModel&#39;</span><span class="pn">.</span><span class="id">Accuracy</span>
                    <span class="c">//threshold,</span>
                    <span class="c">//exampleData </span>
                    <span class="c">//|&gt; (Prediction.BinaryClassification.predictDefaultCols newModel&#39;)</span>
                    <span class="c">//|&gt; Array.ofSeq</span>
                <span class="pn">)</span>
</code></pre></td>
</tr>
</table>

<div class="tip" id="fs1">namespace FSharp</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">namespace Microsoft</div>
<div class="tip" id="fs4">namespace Microsoft.ML</div>
<div class="tip" id="fs5">namespace Microsoft.ML.Data</div>
<div class="tip" id="fs6">module FSharpML</div>
<div class="tip" id="fs7">namespace FSharpML.TransformerModel</div>
<div class="tip" id="fs8">val mlContext : MLContext</div>
<div class="tip" id="fs9">Multiple items<br />type MLContext =<br />&#160;&#160;new : ?seed:Nullable&lt;int&gt; -&gt; MLContext<br />&#160;&#160;member AnomalyDetection : AnomalyDetectionCatalog<br />&#160;&#160;member BinaryClassification : BinaryClassificationCatalog<br />&#160;&#160;member Clustering : ClusteringCatalog<br />&#160;&#160;member ComponentCatalog : ComponentCatalog<br />&#160;&#160;member Data : DataOperationsCatalog<br />&#160;&#160;member Forecasting : ForecastingCatalog<br />&#160;&#160;member Model : ModelOperationsCatalog<br />&#160;&#160;member MulticlassClassification : MulticlassClassificationCatalog<br />&#160;&#160;member Ranking : RankingCatalog<br />&#160;&#160;...<br /><br />--------------------<br />MLContext(?seed: Nullable&lt;Microsoft.FSharp.Core.int&gt;) : MLContext</div>
<div class="tip" id="fs10">Multiple items<br />type Nullable =<br />&#160;&#160;static member Compare&lt;&#39;T&gt; : n1:Nullable&lt;&#39;T&gt; * n2:Nullable&lt;&#39;T&gt; -&gt; int<br />&#160;&#160;static member Equals&lt;&#39;T&gt; : n1:Nullable&lt;&#39;T&gt; * n2:Nullable&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;static member GetUnderlyingType : nullableType:Type -&gt; Type<br /><br />--------------------<br />type Nullable&lt;&#39;T (requires default constructor and value type and &#39;T :&gt; ValueType)&gt; =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : value:&#39;T -&gt; Nullable&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;member Equals : other:obj -&gt; bool<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member GetValueOrDefault : unit -&gt; &#39;T + 1 overload<br />&#160;&#160;&#160;&#160;member HasValue : bool<br />&#160;&#160;&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;&#160;&#160;member Value : &#39;T<br />&#160;&#160;end<br /><br />--------------------<br />Nullable ()<br />Nullable(value: &#39;T) : Nullable&lt;&#39;T&gt;</div>
<div class="tip" id="fs11">val trainDataPath : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs12">val data : IDataView</div>
<div class="tip" id="fs13">property MLContext.Data: DataOperationsCatalog with get</div>
<div class="tip" id="fs14">type TextLoader =<br />&#160;&#160;member GetOutputSchema : unit -&gt; DataViewSchema<br />&#160;&#160;member Load : source:IMultiStreamSource -&gt; IDataView<br />&#160;&#160;nested type Column<br />&#160;&#160;nested type Options<br />&#160;&#160;nested type Range</div>
<div class="tip" id="fs15">type Column =<br />&#160;&#160;new : unit -&gt; Column + 3 overloads<br />&#160;&#160;val Name : string<br />&#160;&#160;val Source : Range[]<br />&#160;&#160;val KeyCount : KeyCount<br />&#160;&#160;member DataKind : DataKind with get, set</div>
<div class="tip" id="fs16">type DataKind =<br />&#160;&#160;| SByte = 1uy<br />&#160;&#160;| Byte = 2uy<br />&#160;&#160;| Int16 = 3uy<br />&#160;&#160;| UInt16 = 4uy<br />&#160;&#160;| Int32 = 5uy<br />&#160;&#160;| UInt32 = 6uy<br />&#160;&#160;| Int64 = 7uy<br />&#160;&#160;| UInt64 = 8uy<br />&#160;&#160;| Single = 9uy<br />&#160;&#160;| Double = 10uy<br />&#160;&#160;...</div>
<div class="tip" id="fs17">val estimatorChain : Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs18">Multiple items<br />type EstimatorChain&lt;&#39;TLastTransformer (requires reference type and &#39;TLastTransformer :&gt; ITransformer)&gt; =<br />&#160;&#160;new : unit -&gt; EstimatorChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;val LastEstimator : IEstimator&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member Append&lt;&#39;TNewTrans&gt; : estimator:IEstimator&lt;&#39;TNewTrans&gt; * ?scope:TransformerScope -&gt; EstimatorChain&lt;&#39;TNewTrans&gt;<br />&#160;&#160;member AppendCacheCheckpoint : env:IHostEnvironment -&gt; EstimatorChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member Fit : input:IDataView -&gt; TransformerChain&lt;&#39;TLastTransformer&gt;<br />&#160;&#160;member GetOutputSchema : inputSchema:SchemaShape -&gt; SchemaShape<br /><br />--------------------<br />EstimatorChain() : EstimatorChain&lt;&#39;TLastTransformer&gt;</div>
<div class="tip" id="fs19">module Estimator<br /><br />from FSharpML</div>
<div class="tip" id="fs20">val append : source1:IEstimator&lt;&#39;a&gt; -&gt; source2:IEstimator&lt;#ITransformer&gt; -&gt; EstimatorChain&lt;&#39;a&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs21">property MLContext.Transforms: TransformsCatalog with get</div>
<div class="tip" id="fs22">property TransformsCatalog.Conversion: TransformsCatalog.ConversionTransforms with get</div>
<div class="tip" id="fs23">module DefaultColumnNames<br /><br />from FSharpML</div>
<div class="tip" id="fs24">val Label : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs25">property TransformsCatalog.Text: TransformsCatalog.TextTransforms with get</div>
<div class="tip" id="fs26">(extension) TransformsCatalog.TextTransforms.FeaturizeText(outputColumnName: Microsoft.FSharp.Core.string,?inputColumnName: Microsoft.FSharp.Core.string) : Transforms.Text.TextFeaturizingEstimator<br />(extension) TransformsCatalog.TextTransforms.FeaturizeText(outputColumnName: Microsoft.FSharp.Core.string, options: Transforms.Text.TextFeaturizingEstimator.Options, [&lt;ParamArray&gt;] inputColumnNames: Microsoft.FSharp.Core.string Microsoft.FSharp.Core.[]) : Transforms.Text.TextFeaturizingEstimator</div>
<div class="tip" id="fs27">val Features : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs28">val appendCacheCheckpoint : mlContext:MLContext -&gt; pipeline:IEstimator&lt;&#39;a&gt; -&gt; IEstimator&lt;ITransformer&gt; (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs29">property MLContext.BinaryClassification: BinaryClassificationCatalog with get</div>
<div class="tip" id="fs30">property BinaryClassificationCatalog.Trainers: BinaryClassificationCatalog.BinaryClassificationTrainers with get</div>
<div class="tip" id="fs31">val estimatorModel : &#39;_arg3 (requires member ( |&gt; ) and member ( |&gt; ) and member ( |&gt; ) and member ( |&gt; ) and &#39;c :&gt; ITransformer and reference type and &#39;e :&gt; ITransformer and reference type and &#39;g :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs32">namespace FSharpML.EstimatorModel</div>
<div class="tip" id="fs33">val trainTestSplit : Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs34">Multiple items<br />module Data<br /><br />from FSharpML<br /><br />--------------------<br />namespace Microsoft.ML.Data<br /><br />--------------------<br />namespace System.Data</div>
<div class="tip" id="fs35">val trainedModel : &#39;_arg3 (requires member ( |&gt; ) and member ( |&gt; ) and member ( |&gt; ) and &#39;a :&gt; ITransformer and reference type and &#39;c :&gt; ITransformer and reference type and &#39;e :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs36">val estimatorModel : &#39;a Microsoft.FSharp.Core.[]</div>
<div class="tip" id="fs37">val evaluationMetrics : &#39;_arg3</div>
<div class="tip" id="fs38">module Evaluation<br /><br />from FSharpML.TransformerModel</div>
<div class="tip" id="fs39">Multiple items<br />module BinaryClassification<br /><br />from FSharpML.TransformerModel.Evaluation<br /><br />--------------------<br />type BinaryClassification =<br />&#160;&#160;static member evaluateNonCalibratedWith : ?Label:string * ?Score:string * ?PredictedLabel:string -&gt; (IDataView -&gt; TransformerModel&lt;&#39;a0&gt; -&gt; BinaryClassificationMetrics) (requires &#39;a0 :&gt; ITransformer and reference type)<br />&#160;&#160;static member evaluateWith : ?Label:string * ?Score:string * ?Probability:string * ?PredictedLabel:string -&gt; (IDataView -&gt; TransformerModel&lt;&#39;a0&gt; -&gt; CalibratedBinaryClassificationMetrics) (requires &#39;a0 :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs40">val evaluate : data:IDataView -&gt; transformerModel:TransformerModel&lt;&#39;a&gt; -&gt; CalibratedBinaryClassificationMetrics (requires &#39;a :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs41">val scoredData : &#39;_arg3</div>
<div class="tip" id="fs42">Multiple items<br />module TransformerModel<br /><br />from FSharpML.TransformerModel<br /><br />--------------------<br />namespace FSharpML.TransformerModel<br /><br />--------------------<br />type TransformerModel&lt;&#39;a (requires &#39;a :&gt; ITransformer and reference type)&gt; =<br />&#160;&#160;{ TransformerChain: TransformerChain&lt;&#39;a&gt;<br />&#160;&#160;&#160;&#160;Context: MLContext }</div>
<div class="tip" id="fs43">val transform : data:IDataView -&gt; transformerModel:TransformerModel&lt;&#39;b&gt; -&gt; IDataView (requires &#39;b :&gt; ITransformer and reference type)</div>
<div class="tip" id="fs44">type SpamInput =<br />&#160;&#160;{ LabelText: obj<br />&#160;&#160;&#160;&#160;Message: obj }</div>
<div class="tip" id="fs45">SpamInput.LabelText: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs46">SpamInput.Message: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs47">val exampleData : &#39;_arg3 (requires member ( |&gt; ) and member ( |&gt; ))</div>
<div class="tip" id="fs48">type Array =<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CopyTo : array:Array * index:int -&gt; unit + 1 overload<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator<br />&#160;&#160;member GetLength : dimension:int -&gt; int<br />&#160;&#160;member GetLongLength : dimension:int -&gt; int64<br />&#160;&#160;member GetLowerBound : dimension:int -&gt; int<br />&#160;&#160;member GetUpperBound : dimension:int -&gt; int<br />&#160;&#160;member GetValue : index:int -&gt; obj + 7 overloads<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member IsFixedSize : bool<br />&#160;&#160;...</div>
<div class="tip" id="fs49">val scoredData : &#39;a Microsoft.FSharp.Core.[]</div>
<div class="tip" id="fs50">val Probability : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs51">val Score : Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs52">val idea : &#39;_arg3</div>
<div class="tip" id="fs53">val thresholdVSPrecicionAndRecall : &#39;_arg3</div>
<div class="tip" id="fs54">type BinaryPredictionTransformer&lt;&#39;TModel (requires reference type)&gt; =<br />&#160;&#160;inherit SingleFeaturePredictionTransformerBase&lt;&#39;TModel&gt;</div>
<div class="tip" id="fs55">val trainedModel : &#39;a Microsoft.FSharp.Core.[]</div>
<div class="tip" id="fs56">Multiple items<br />type TransformerChain&lt;&#39;TLastTransformer (requires reference type and &#39;TLastTransformer :&gt; ITransformer)&gt; =<br />&#160;&#160;new : [&lt;ParamArray&gt;] transformers:ITransformer[] -&gt; TransformerChain&lt;&#39;TLastTransformer&gt; + 1 overload<br />&#160;&#160;val LastTransformer : &#39;TLastTransformer<br />&#160;&#160;member Append&lt;&#39;TNewLast&gt; : transformer:&#39;TNewLast * ?scope:TransformerScope -&gt; TransformerChain&lt;&#39;TNewLast&gt;<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator&lt;ITransformer&gt;<br />&#160;&#160;member GetModelFor : scopeFilter:TransformerScope -&gt; TransformerChain&lt;ITransformer&gt;<br />&#160;&#160;member GetOutputSchema : inputSchema:DataViewSchema -&gt; DataViewSchema<br />&#160;&#160;member Transform : input:IDataView -&gt; IDataView<br /><br />--------------------<br />TransformerChain([&lt;ParamArray&gt;] transformers: ITransformer Microsoft.FSharp.Core.[]) : TransformerChain&lt;&#39;TLastTransformer&gt;<br />TransformerChain(transformers: Collections.Generic.IEnumerable&lt;ITransformer&gt;, scopes: Collections.Generic.IEnumerable&lt;TransformerScope&gt;) : TransformerChain&lt;&#39;TLastTransformer&gt;</div>

            </div>
            <div class="span3">
                <img src="https://CSBiology.github.io/FSharpML//img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
                <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
                    <li class="nav-header">BioFSharp</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//index.html">Home page</a></li>
                    <li class="divider"></li>
                    <li><a href="https://CSBiology.github.io/FSharpML//release-notes.html">Release Notes</a></li>

                    <li class="nav-header">Samples</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//BinaryClass_SentimentAnalysis.html">Binary classification: sentiment analysis</a></li>
                    <li><a href="https://CSBiology.github.io/FSharpML//BinaryClass_SpamDetection.html">Binary classification: spam detection</a></li>


                    <li><a href="https://CSBiology.github.io/FSharpML//Regression_PricePrediction.html">Regression: price prediction</a></li>


                    <li><a href="https://CSBiology.github.io/FSharpML//Clustering_IrisFlowers.html">Clustering: iris flowers</a></li>

                    <li class="nav-header">Documentation</li>
                    <li><a href="https://CSBiology.github.io/FSharpML//reference/index.html">API Reference</a></li>


                </ul>
            </div>
        </div>
    </div>
    <a href="https://github.com/CSBiology/FSharpML"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub" /></a>
</body>
</html>